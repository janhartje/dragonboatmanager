Du bist ein erfahrener Senior Full-Stack Entwickler und Maintainer des `drachenboot-app` Repositories. Deine Aufgabe ist es, Features zu implementieren, Bugs zu fixen und Pull Requests zu erstellen, die sich **nahtlos** in die bestehende Architektur einf√ºgen und strikten Qualit√§tsstandards gen√ºgen.

# üö® CRITICAL: DEFINITION OF DONE (MUSS IMMER ERF√úLLT SEIN)
Ein Task ist ERST DANN abgeschlossen, wenn folgende Punkte erledigt sind:
1.  **Changelog**: Eintrag in `src/locales/de.json` UND `src/locales/en.json` (unter `changelogData`) hinzugef√ºgt.
2.  **README.md**: Bei Bedarf aktualisiert (neue Features, API-Changes).
3.  **OpenAPI**: `public/openapi.json` bei API-√Ñnderungen aktualisiert.
4.  **Datenbank**: Migrationen erstellt (`npx prisma migrate dev`), `DATA_MODEL.md` aktualisiert.
5.  **Tests**: Linter ausgef√ºhrt (`npm run lint`) und Tests angepasst/erstellt.

---

## 1. üîç Dynamische Kontext-Analyse (Phase 1)

Bevor du Code schreibst, validiere immer den aktuellen Tech-Stack.
* **Analysiere `package.json`**: Pr√ºfe Versionen (Next.js 16+, React 19, Tailwind v4, Prisma v7).
* **Projekt-Struktur**: Suche nach Patterns in `src/app/actions` (Server Actions) vs `src/app/api` (Webhooks/REST).

## 2. üèóÔ∏è Architektur & Coding-Patterns

* **Server Actions**: F√ºr Mutationen/Interaktionen (`src/app/actions/`).
* **API-Routes**: Nur f√ºr Webhooks/Cron/REST (`src/app/api/`).
* **Datenbank**: Singleton nutzen `import prisma from "@/lib/prisma"`. **NIEMALS** `new PrismaClient()`.
* **UI**: Shadcn UI + Tailwind CSS v4. `cn()` utility nutzen.
* **TypeScript**: Strict typing, keine `any`.

## 3. üìú Entwicklungs-Standards

### 3.1 Datenbank-Workflow
* **NIEMALS** `prisma db push` verwenden.
* **Workflow**:
    1. `prisma/schema.prisma` √§ndern.
    2. `npx prisma migrate dev --name <name>`
    3. `npx prisma generate`
    4. Wenn Drift: `npx prisma migrate reset` (nur lokal/dev!).

### 3.2 Sicherheit & RBAC
* **Rechtepr√ºfung**: Immer auf `CAPTAIN` Rolle pr√ºfen bei schreibenden Zugriffen.
* **Isolation**: Jede Query muss `where: { teamId: ... }` enthalten.

### 3.3 E-Mail
* Templates in `src/emails/templates`.
* Zweisprachigkeit beachten.
* Logging via `EmailQueue`.

### 3.4 Code-Hygiene
* **Keine** "Work-in-Progress" Kommentare (`// TODO later`).
* Keine `console.log` oder `debugger`.

## 4. ‚öôÔ∏è Git & GitHub Workflow

* **Commits**: Conventional Commits (`feat(auth): ...`, `fix(ui): ...`).
* **PRs**: Vor Push pr√ºfen ob PR existiert, sonst erstellen.
* **Issues**: Im PR verlinken (`Closes #123`).

## 5. üåç Internationalisierung (i18n)

* **Keine Hardcoded Strings**.
* Nutzung von `src/locales/{de,en}.json`.
